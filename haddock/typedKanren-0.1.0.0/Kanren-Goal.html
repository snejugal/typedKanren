<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Kanren.Goal</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">typedKanren-0.1.0.0</span><ul class="links" id="page-menu"><li><a href="src/Kanren.Goal.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Kanren.Goal</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">The Goal monad</a></li><li><a href="#g:2">Primitive operations</a></li><li><a href="#g:3">Constraints</a></li><li><a href="#g:4">Fresh variables</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Implement and execute relational programs.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Goal">Goal</a> x</li><li class="src short"><a href="#v:run">run</a> :: <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> v =&gt; (v -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> ()) -&gt; [v]</li><li class="src short"><a href="#v:successo">successo</a> :: x -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x</li><li class="src short"><a href="#v:failo">failo</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x</li><li class="src short"><a href="#v:-61--61--61-">(===)</a> :: <a href="Kanren-Core.html#t:Logical" title="Kanren.Core">Logical</a> a =&gt; <a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a> a -&gt; <a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> ()</li><li class="src short"><a href="#v:conj">conj</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> y -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> y</li><li class="src short"><a href="#v:conjMany">conjMany</a> :: [<a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> ()] -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> ()</li><li class="src short"><a href="#v:disj">disj</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x</li><li class="src short"><a href="#v:disjMany">disjMany</a> :: [<a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x] -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x</li><li class="src short"><a href="#v:conde">conde</a> :: [[<a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> ()]] -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> ()</li><li class="src short"><a href="#v:delay">delay</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a</li><li class="src short"><a href="#v:-61--47--61-">(=/=)</a> :: <a href="Kanren-Core.html#t:Logical" title="Kanren.Core">Logical</a> a =&gt; <a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a> a -&gt; <a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> ()</li><li class="src short"><span class="keyword">class</span> <a href="#t:Fresh">Fresh</a> v <span class="keyword">where</span><ul class="subs"><li><a href="#v:fresh-39-">fresh'</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> v</li><li><a href="#v:resolve">resolve</a> :: <a href="Kanren-Core.html#t:State" title="Kanren.Core">State</a> -&gt; v -&gt; v</li></ul></li><li class="src short"><a href="#v:fresh">fresh</a> :: <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> v =&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> v</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>The Goal monad</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Goal" class="def">Goal</a> x <a href="src/Kanren.Goal.html#Goal" class="link">Source</a> <a href="#t:Goal" class="selflink">#</a></p><div class="doc"><p>A computation in the relational world.</p><p>On its own, a goal performs search in a search tree. It takes some state and
 transforms it to a stream of new states. But it is better to think of a goal
 as a relational program. If you want to write a predicate, it will take
 <code><a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a></code>s as parameters and return a <code><a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a></code>.</p><pre>zeroo :: Term Int -&gt; Goal ()
zeroo x = x === Value 0</pre><p>A <code><a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a></code> is a <code><a href="../base-4.18.2.1/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a></code>, so you can use the do-notation to write relations.</p><pre>oppositeso :: Term Bool -&gt; Term Bool -&gt; Goal ()
oppositeso x y = do
  x === Value True
  y === Value False</pre><p>Sequencing two goals performs <code><a href="Kanren-Goal.html#v:conj" title="Kanren.Goal">conj</a></code>unction. To make a branch, use
 <code><a href="Kanren-Goal.html#v:disj" title="Kanren.Goal">disj</a></code>unction.</p><pre>noto :: Term Bool -&gt; Term Bool -&gt; Goal ()
noto x y = xIsTrue `disj` xIsFalse
 where
  xIsTrue = x === Value True `conj` y === Value False
  xIsFalse = x === Value False `conj` y === Value True</pre><p>To execute a goal and find its solutions, use <code><a href="Kanren-Goal.html#v:run" title="Kanren.Goal">run</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\x -&gt; noto (Value False) x)
</code></strong>[Value True]
</pre></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Goal">Instances</h4><details id="i:Goal" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Goal:Alternative:1"></span> <a href="../base-4.18.2.1/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a></span> <a href="src/Kanren.Goal.html#line-94" class="link">Source</a> <a href="#t:Goal" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Goal:Alternative:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Kanren-Goal.html">Kanren.Goal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:empty">empty</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a <a href="#v:empty" class="selflink">#</a></p><p class="src"><a href="#v:-60--124--62-">(&lt;|&gt;)</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a <a href="#v:-60--124--62-" class="selflink">#</a></p><p class="src"><a href="#v:some">some</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> [a] <a href="#v:some" class="selflink">#</a></p><p class="src"><a href="#v:many">many</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> [a] <a href="#v:many" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Goal:Applicative:2"></span> <a href="../base-4.18.2.1/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a></span> <a href="src/Kanren.Goal.html#line-83" class="link">Source</a> <a href="#t:Goal" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Goal:Applicative:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Kanren-Goal.html">Kanren.Goal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> (a -&gt; b) -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> b -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> b -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> b -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Goal:Functor:3"></span> <a href="../base-4.18.2.1/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a></span> <a href="src/Kanren.Goal.html#line-80" class="link">Source</a> <a href="#t:Goal" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Goal:Functor:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Kanren-Goal.html">Kanren.Goal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> b -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Goal:Monad:4"></span> <a href="../base-4.18.2.1/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a></span> <a href="src/Kanren.Goal.html#line-87" class="link">Source</a> <a href="#t:Goal" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Goal:Monad:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Kanren-Goal.html">Kanren.Goal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a -&gt; (a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> b) -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> b -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a <a href="#v:return" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:run" class="def">run</a> :: <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> v =&gt; (v -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> ()) -&gt; [v] <a href="src/Kanren.Goal.html#run" class="link">Source</a> <a href="#v:run" class="selflink">#</a></p><div class="doc"><p>Query for solutions of a goal.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\x -&gt; x === Value (42 :: Int))
</code></strong>[42]
</pre><p>You can ask to solve for several variables, or none at all. You can still
 create intermediate variables inside using <code><a href="Kanren-Goal.html#v:fresh" title="Kanren.Goal">fresh</a></code>, but they will not be
 returned as solutions.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\() -&gt; fresh &gt;&gt;= (\x -&gt; x === Value True))
</code></strong>[()]
</pre><p>Note that there may be several solutions, including infinitely many or zero.
 If you want to limit the number of solutions, just put it through <code><a href="../base-4.18.2.1/GHC-List.html#v:take" title="GHC.List">take</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>take 5 $ run (\x -&gt; disjMany (map (\a -&gt; x === Value a) [0 :: Int ..]))
</code></strong>[0,1,2,3,4]
</pre><p>This function will return logical representation of solutions. This matters
 for complex types which have a separate logical representation. If you want
 to transform them back to regular representation, use <code><a href="../base-4.18.2.1/Data-Functor.html#v:fmap" title="Data.Functor">fmap</a></code> and <code><a href="Kanren-Core.html#v:extract-39-" title="Kanren.Core">extract'</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>extract' &lt;$&gt; run (\x -&gt; x === inject' [True])
</code></strong>[Just [True]]
</pre><p>Note that the retrived solutions might be subject to constraints, but it is
 not yet possible to retrieve them.</p></div></div><a href="#g:2" id="g:2"><h1>Primitive operations</h1></a><div class="top"><p class="src"><a id="v:successo" class="def">successo</a> :: x -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x <a href="src/Kanren.Goal.html#successo" class="link">Source</a> <a href="#v:successo" class="selflink">#</a></p><div class="doc"><p>A goal that always succeeds.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\() -&gt; successo ())
</code></strong>[()]
</pre></div></div><div class="top"><p class="src"><a id="v:failo" class="def">failo</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x <a href="src/Kanren.Goal.html#failo" class="link">Source</a> <a href="#v:failo" class="selflink">#</a></p><div class="doc"><p>A goal that always fails.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\() -&gt; failo)
</code></strong>[]
</pre></div></div><div class="top"><p class="src"><a id="v:-61--61--61-" class="def">(===)</a> :: <a href="Kanren-Core.html#t:Logical" title="Kanren.Core">Logical</a> a =&gt; <a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a> a -&gt; <a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> () <span class="fixity">infix 4</span><span class="rightedge"></span> <a href="src/Kanren.Goal.html#%3D%3D%3D" class="link">Source</a> <a href="#v:-61--61--61-" class="selflink">#</a></p><div class="doc"><p>Unify two terms.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\() -&gt; Value 42 === Value (42 :: Int))
</code></strong>[()]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\() -&gt; Value 42 === Value (37 :: Int))
</code></strong>[]
</pre></div></div><div class="top"><p class="src"><a id="v:conj" class="def">conj</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> y -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> y <span class="fixity">infixr 3</span><span class="rightedge"></span> <a href="src/Kanren.Goal.html#conj" class="link">Source</a> <a href="#v:conj" class="selflink">#</a></p><div class="doc"><p>Perform conjnction of two goals. If the first goal succeeds, run the second
 goal on its results.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\x -&gt; x === Value 42 `conj` x === Value (42 :: Int))
</code></strong>[42]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\x -&gt; x === Value 42 `conj` x === Value (37 :: Int))
</code></strong>[]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\(x, y) -&gt; x === Value (42 :: Int) `conj` y === Value True)
</code></strong>[(42,True)]
</pre><p>Note that the do-notation performs conjunction as well, so you will rarely
 need to use this function directly.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong> run (\(x, y) -&gt; do
   x === Value (42 :: Int)
   y === Value True
 )
:}
[(42,True)]
</pre></div></div><div class="top"><p class="src"><a id="v:conjMany" class="def">conjMany</a> :: [<a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> ()] -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> () <a href="src/Kanren.Goal.html#conjMany" class="link">Source</a> <a href="#v:conjMany" class="selflink">#</a></p><div class="doc"><p>Perform conjunction of several goals, left to right.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\(x, y) -&gt; conjMany [x === Value (42 :: Int), y === Value True])
</code></strong>[(42,True)]
</pre></div></div><div class="top"><p class="src"><a id="v:disj" class="def">disj</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x <span class="fixity">infixr 2</span><span class="rightedge"></span> <a href="src/Kanren.Goal.html#disj" class="link">Source</a> <a href="#v:disj" class="selflink">#</a></p><div class="doc"><p>Perform disjunction of two goals. Run the first goal, then the second, and
 combine their results.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\x -&gt; x === Value 42 `disj` x === Value (37 :: Int))
</code></strong>[42,37]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\x -&gt; x === Value 42 `disj` x === Value (42 :: Int))
</code></strong>[42,42]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\(x, y) -&gt; x === Value (42 :: Int) `disj` y === Value True)
</code></strong>[(42,_.0),(_.1,True)]
</pre></div></div><div class="top"><p class="src"><a id="v:disjMany" class="def">disjMany</a> :: [<a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x] -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> x <a href="src/Kanren.Goal.html#disjMany" class="link">Source</a> <a href="#v:disjMany" class="selflink">#</a></p><div class="doc"><p>Perform disjunction of several goals, left to right.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\x -&gt; disjMany (map (\a -&gt; x === Value a) [1, 3 .. 11 :: Int]))
</code></strong>[1,3,5,7,9,11]
</pre></div></div><div class="top"><p class="src"><a id="v:conde" class="def">conde</a> :: [[<a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> ()]] -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> () <a href="src/Kanren.Goal.html#conde" class="link">Source</a> <a href="#v:conde" class="selflink">#</a></p><div class="doc"><p>Consider several possible cases, using syntax similar to <code>conde</code> from
 <code>faster-minikanren</code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>  run (\(x, y) -&gt; conde
    [ [ x === Value False, y === Value 0 ]
    , [ x === Value True, y === Value 1 ]
    ])
:}
[(False,0),(True,1)]
</pre><p>However, this might not be the best syntax for Haskell. Using <code><a href="Kanren-Goal.html#v:disjMany" title="Kanren.Goal">disjMany</a></code> with
 the do-notation may be easier to type and less noisy:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>  run (\(x, y) -&gt; disjMany
    [ do
        x === Value False
        y === Value 0
    , do
        x === Value True
        y === Value 1
    ])
:}
[(False,0),(True,1)]
</pre><p>In addition, the <a href="Match.html">Match</a> module provides pattern matching over variants,
 which might better express your intent.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>  run (\(x, y) -&gt; x &amp; (matche
    &amp; on _False (\() -&gt; y === Value 0)
    &amp; on _True (\() -&gt; y === Value 1)))
:}
[(False,0),(True,1)]
</pre></div></div><div class="top"><p class="src"><a id="v:delay" class="def">delay</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> a <a href="src/Kanren.Goal.html#delay" class="link">Source</a> <a href="#v:delay" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h1>Constraints</h1></a><div class="top"><p class="src"><a id="v:-61--47--61-" class="def">(=/=)</a> :: <a href="Kanren-Core.html#t:Logical" title="Kanren.Core">Logical</a> a =&gt; <a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a> a -&gt; <a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a> a -&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> () <span class="fixity">infix 4</span><span class="rightedge"></span> <a href="src/Kanren.Goal.html#%3D%2F%3D" class="link">Source</a> <a href="#v:-61--47--61-" class="selflink">#</a></p><div class="doc"><p>Put a constraint that two terms must not be equal.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\x -&gt; x =/= Value 42 `conj` x === Value (37 :: Int))
</code></strong>[37]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>run (\x -&gt; x =/= Value 42 `conj` x === Value (42 :: Int))
</code></strong>[]
</pre><p>It is not yet possible to retrieve solutions along with remaining constraints.</p></div></div><a href="#g:4" id="g:4"><h1>Fresh variables</h1></a><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:Fresh" class="def">Fresh</a> v <span class="keyword">where</span> <a href="src/Kanren.Goal.html#Fresh" class="link">Source</a> <a href="#t:Fresh" class="selflink">#</a></p><div class="doc"><p>The existential quantifier.</p><p>Whenever you need an intermediate variable, <code><a href="Kanren-Goal.html#v:fresh" title="Kanren.Goal">fresh</a></code> will give you one.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>  run (\() -&gt; do
    x &lt;- fresh
    x === Value (42 :: Int))
:}
[()]
</pre><p>Creating a lot of variables one-by-one might be tiresome though. This is why
 <code><a href="Kanren-Goal.html#v:fresh" title="Kanren.Goal">fresh</a></code> is not a standalone function but a method on a type class. <code><a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a></code>
 is implemented not only for <code><code><a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a></code> a</code> but for tuples too, so you can ask for
 several fresh variables at once.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>  run (\() -&gt; do
    (x, y) &lt;- fresh
    x === Value True
    y === Value False)
:}
[()]
</pre><p>In fact, <code><a href="Kanren-Goal.html#v:run" title="Kanren.Goal">run</a></code> also uses <code><a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a></code>, so you can choose how many variables you
 want to solve for.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>  run (\(x, y) -&gt; do
    x === Value True
    y === Value False)
:}
[(True,False)]
</pre><p>As an edge case, you can ask for no variables at all using <code>()</code>. While this
 is not useful inside relations, this is how the first two examples actually
 work. <code><a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a></code> is also used for pattern matching from the <code><a href="Match.html">Match</a></code> module
 when the matched value is not known yet.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:fresh-39-" class="def">fresh'</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> v <a href="src/Kanren.Goal.html#fresh%27" class="link">Source</a> <a href="#v:fresh-39-" class="selflink">#</a></p><div class="doc"><p>Create fresh variables.</p></div><p class="src"><a id="v:resolve" class="def">resolve</a> :: <a href="Kanren-Core.html#t:State" title="Kanren.Core">State</a> -&gt; v -&gt; v <a href="src/Kanren.Goal.html#resolve" class="link">Source</a> <a href="#v:resolve" class="selflink">#</a></p><div class="doc"><p>Resolve each variable to its value in the given state.</p></div></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Fresh">Instances</h4><details id="i:Fresh" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Fresh:Fresh:1"></span> <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> ()</span> <a href="src/Kanren.Goal.html#line-307" class="link">Source</a> <a href="#t:Fresh" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Fresh:Fresh:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Kanren-Goal.html">Kanren.Goal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fresh-39-">fresh'</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> () <a href="src/Kanren.Goal.html#fresh%27" class="link">Source</a> <a href="#v:fresh-39-" class="selflink">#</a></p><p class="src"><a href="#v:resolve">resolve</a> :: <a href="Kanren-Core.html#t:State" title="Kanren.Core">State</a> -&gt; () -&gt; () <a href="src/Kanren.Goal.html#resolve" class="link">Source</a> <a href="#v:resolve" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Fresh:Fresh:2"></span> <a href="Kanren-Core.html#t:Logical" title="Kanren.Core">Logical</a> a =&gt; <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> (<a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a> a)</span> <a href="src/Kanren.Goal.html#line-311" class="link">Source</a> <a href="#t:Fresh" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Fresh:Fresh:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Kanren-Goal.html">Kanren.Goal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fresh-39-">fresh'</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> (<a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a> a) <a href="src/Kanren.Goal.html#fresh%27" class="link">Source</a> <a href="#v:fresh-39-" class="selflink">#</a></p><p class="src"><a href="#v:resolve">resolve</a> :: <a href="Kanren-Core.html#t:State" title="Kanren.Core">State</a> -&gt; <a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a> a -&gt; <a href="Kanren-Core.html#t:Term" title="Kanren.Core">Term</a> a <a href="src/Kanren.Goal.html#resolve" class="link">Source</a> <a href="#v:resolve" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Fresh:Fresh:3"></span> (<a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> a, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> b) =&gt; <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> (a, b)</span> <a href="src/Kanren.Goal.html#line-315" class="link">Source</a> <a href="#t:Fresh" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Fresh:Fresh:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Kanren-Goal.html">Kanren.Goal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fresh-39-">fresh'</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> (a, b) <a href="src/Kanren.Goal.html#fresh%27" class="link">Source</a> <a href="#v:fresh-39-" class="selflink">#</a></p><p class="src"><a href="#v:resolve">resolve</a> :: <a href="Kanren-Core.html#t:State" title="Kanren.Core">State</a> -&gt; (a, b) -&gt; (a, b) <a href="src/Kanren.Goal.html#resolve" class="link">Source</a> <a href="#v:resolve" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Fresh:Fresh:4"></span> (<a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> a, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> b, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> c) =&gt; <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> (a, b, c)</span> <a href="src/Kanren.Goal.html#line-325" class="link">Source</a> <a href="#t:Fresh" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Fresh:Fresh:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Kanren-Goal.html">Kanren.Goal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fresh-39-">fresh'</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> (a, b, c) <a href="src/Kanren.Goal.html#fresh%27" class="link">Source</a> <a href="#v:fresh-39-" class="selflink">#</a></p><p class="src"><a href="#v:resolve">resolve</a> :: <a href="Kanren-Core.html#t:State" title="Kanren.Core">State</a> -&gt; (a, b, c) -&gt; (a, b, c) <a href="src/Kanren.Goal.html#resolve" class="link">Source</a> <a href="#v:resolve" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Fresh:Fresh:5"></span> (<a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> a, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> b, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> c, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> d) =&gt; <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> (a, b, c, d)</span> <a href="src/Kanren.Goal.html#line-336" class="link">Source</a> <a href="#t:Fresh" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Fresh:Fresh:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Kanren-Goal.html">Kanren.Goal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fresh-39-">fresh'</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> (a, b, c, d) <a href="src/Kanren.Goal.html#fresh%27" class="link">Source</a> <a href="#v:fresh-39-" class="selflink">#</a></p><p class="src"><a href="#v:resolve">resolve</a> :: <a href="Kanren-Core.html#t:State" title="Kanren.Core">State</a> -&gt; (a, b, c, d) -&gt; (a, b, c, d) <a href="src/Kanren.Goal.html#resolve" class="link">Source</a> <a href="#v:resolve" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Fresh:Fresh:6"></span> (<a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> a, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> b, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> c, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> d, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> e) =&gt; <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> (a, b, c, d, e)</span> <a href="src/Kanren.Goal.html#line-349" class="link">Source</a> <a href="#t:Fresh" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Fresh:Fresh:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Kanren-Goal.html">Kanren.Goal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fresh-39-">fresh'</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> (a, b, c, d, e) <a href="src/Kanren.Goal.html#fresh%27" class="link">Source</a> <a href="#v:fresh-39-" class="selflink">#</a></p><p class="src"><a href="#v:resolve">resolve</a> :: <a href="Kanren-Core.html#t:State" title="Kanren.Core">State</a> -&gt; (a, b, c, d, e) -&gt; (a, b, c, d, e) <a href="src/Kanren.Goal.html#resolve" class="link">Source</a> <a href="#v:resolve" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Fresh:Fresh:7"></span> (<a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> a, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> b, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> c, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> d, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> e, <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> f) =&gt; <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> (a, b, c, d, e, f)</span> <a href="src/Kanren.Goal.html#line-362" class="link">Source</a> <a href="#t:Fresh" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Fresh:Fresh:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Kanren-Goal.html">Kanren.Goal</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fresh-39-">fresh'</a> :: <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> (a, b, c, d, e, f) <a href="src/Kanren.Goal.html#fresh%27" class="link">Source</a> <a href="#v:fresh-39-" class="selflink">#</a></p><p class="src"><a href="#v:resolve">resolve</a> :: <a href="Kanren-Core.html#t:State" title="Kanren.Core">State</a> -&gt; (a, b, c, d, e, f) -&gt; (a, b, c, d, e, f) <a href="src/Kanren.Goal.html#resolve" class="link">Source</a> <a href="#v:resolve" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:fresh" class="def">fresh</a> :: <a href="Kanren-Goal.html#t:Fresh" title="Kanren.Goal">Fresh</a> v =&gt; <a href="Kanren-Goal.html#t:Goal" title="Kanren.Goal">Goal</a> v <a href="src/Kanren.Goal.html#fresh" class="link">Source</a> <a href="#v:fresh" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>